<!DOCTYPE HTML>
<!--
	Telephasic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Actividad #3 - 180370</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="no-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<div id="header" class="container">

						<!-- Logo -->
							<h1 id="logo"><a href="index.html">REGRESAR</a></h1>
					</div>
				</div>

			<!-- Main -->
				<div class="wrapper">
					<div class="container" id="main">

						<!-- Content -->
						<article id="content">
							<header>
								<h2>ACTIVIDAD #3</h2>
							</header>

							<p>
							El presente cuestionario aborda conceptos fundamentales del filtrado de paquetes en sistemas 
							GNU/Linux mediante <strong>iptables</strong>, herramienta basada en <strong>Netfilter</strong> que permite 
							implementar controles de acceso a nivel de red. El dominio de estos comandos es clave dentro 
							de la administración segura de servidores, ya que permite aplicar políticas de control de tráfico 
							alineadas a principios como mínimo privilegio y defensa en profundidad.
							</p>

							<p>
							La configuración correcta de un firewall host-based reduce significativamente la superficie de ataque, 
							mitigando amenazas como escaneo de puertos, accesos no autorizados y explotación de servicios expuestos.
							</p>

							<hr>

							<h3>1. Recorrido de un paquete dentro del firewall</h3>

							<p>
							Cuando un paquete entra o sale del sistema, el kernel lo procesa a través de una <strong>tabla</strong>, 
							posteriormente pasa por una <strong>cadena</strong> (chain) y finalmente se ejecuta un <strong>objetivo</strong> 
							(target) como ACCEPT, DROP o LOG.
							</p>

							<p>
							Este flujo permite aplicar reglas organizadas por función (filtrado, traducción de direcciones, etc.), 
							garantizando un control granular del tráfico.
							</p>

							<hr>

							<h3>2. Tablas principales y su función operativa</h3>

							<ul>
							<li><b>FILTER:</b> Tabla predeterminada para permitir o bloquear tráfico.<br>
							Ejemplo: Bloquear conexiones SSH no autorizadas.</li>

							<li><b>NAT:</b> Traducción de direcciones IP y puertos.<br>
							Ejemplo: Compartir conexión a internet mediante enmascaramiento (MASQUERADE).</li>

							<li><b>MANGLE:</b> Modificación avanzada de paquetes (marcado, QoS).</li>

							<li><b>RAW:</b> Permite excepciones en el seguimiento de conexiones (conntrack).</li>

							<li><b>SECURITY:</b> Integración con módulos de seguridad como SELinux.</li>
							</ul>

							<p>
							Estas funciones están documentadas en recursos técnicos en español como:
							</p>

							<ul>
							<li>Documentación oficial de Netfilter (traducciones comunitarias)</li>
							<li>Guía de iptables en <i>Red Hat Enterprise Linux</i> (accesible en español)</li>
							<li>Manual de administración de servidores Linux en <i>Ubuntu Server</i></li>
							<li>Portal especializado en seguridad informática de INCIBE (España)</li>
							</ul>

							<hr>

							<h3>3. Estructura de un comando típico</h3>

							<pre>
							iptables -A INPUT -p tcp -m multiport --dports 80,443 -j ACCEPT
							</pre>

							<p>
							Desglose técnico:
							</p>

							<ul>
							<li><b>-A INPUT:</b> Agrega la regla a la cadena INPUT.</li>
							<li><b>-p tcp:</b> Aplica únicamente a protocolo TCP.</li>
							<li><b>-m multiport:</b> Permite evaluar múltiples puertos.</li>
							<li><b>--dports 80,443:</b> Puertos destino HTTP y HTTPS.</li>
							<li><b>-j ACCEPT:</b> Acción final: permitir tráfico.</li>
							</ul>

							<hr>

							<h3>4. Interpretación funcional</h3>

							<p>
							La regla permite tráfico TCP entrante hacia los puertos 80 y 443, 
							habilitando servicios web HTTP y HTTPS en el servidor.
							</p>

							<hr>

							<h3>5. Opciones frecuentes en reglas de seguridad</h3>

							<h4>a) Control de tasa de intentos</h4>
							<ul>
							<li><b>--limit</b> → Útil para mitigar ataques de fuerza bruta o DoS básicos.</li>
							</ul>

							<h4>b) Filtrado por dirección IP origen</h4>
							<ul>
							<li><b>-s</b> → Restringe acceso a direcciones específicas.</li>
							</ul>

							<h4>c) Visualización sin resolución DNS</h4>
							<ul>
							<li><b>-n</b> → Muestra direcciones numéricas, agilizando consultas.</li>
							</ul>

							<h4>d) Mostrar estadísticas de tráfico</h4>
							<ul>
							<li><b>-v</b> → Incluye contadores de paquetes y bytes.</li>
							</ul>

							<hr>

							<h3>6. Análisis de regla con control de estado</h3>

							<pre>
							iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 
							-m state --state NEW,ESTABLISHED -j ACCEPT
							</pre>

							<p>
							Esta configuración permite tráfico TCP entrante por la interfaz <b>eth0</b> 
							en los puertos 22 (SSH), 80 (HTTP) y 443 (HTTPS), 
							únicamente si la conexión es nueva o ya está establecida.
							</p>

							<p>
							El uso de <b>state</b> o <b>conntrack</b> implementa un firewall con inspección 
							de estado (stateful firewall), aumentando el nivel de seguridad frente a paquetes inválidos.
							</p>

							<hr>

							<h3>7. Habilitar servicio web</h3>

							<pre>
							iptables -A INPUT -p tcp --dport 80 -j ACCEPT
							</pre>

							<p>
							Permite tráfico HTTP entrante hacia el servidor.
							</p>

							<hr>

							<h3>8. Política permisiva de salida</h3>

							<pre>
							iptables -A OUTPUT -j ACCEPT
							</pre>

							<p>
							Autoriza todo el tráfico saliente. En entornos productivos se recomienda 
							definir reglas más restrictivas según el principio de mínimo privilegio.
							</p>

							<hr>

							<h3>9. Restringir SSH a una IP específica</h3>

							<pre>
							iptables -A INPUT -p tcp --dport 22 -s 192.168.1.50 -j ACCEPT
							</pre>

							<p>
							Permite acceso SSH únicamente desde la IP indicada, reduciendo la exposición 
							a ataques automatizados.
							</p>

							<hr>

							<h3>10. Permitir únicamente conexiones establecidas o relacionadas</h3>

							<pre>
							iptables -A INPUT -p tcp -m multiport --dports 80,443 
							-m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
							</pre>

							<p>
							Refuerza la seguridad permitiendo únicamente tráfico asociado a conexiones 
							ya iniciadas o relacionadas con una sesión válida.
							</p>

							<hr>

							<h3>11. Registro y autorización controlada</h3>

							<h4>Registro de intentos nuevos</h4>
							<pre>
							iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 
							-m conntrack --ctstate NEW -j LOG --log-prefix "Firewall: "
							</pre>

							<h4>Permitir conexiones válidas</h4>
							<pre>
							iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 
							-m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
							</pre>

							<h4>Permitir tráfico de respuesta</h4>
							<pre>
							iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
							</pre>

							<p>
							El registro previo permite auditoría y análisis forense, práctica alineada 
							a buenas prácticas recomendadas por organismos como INCIBE y manuales 
							de endurecimiento de servidores Linux.
							</p>

							<hr>

							<h3>Aplicación en un entorno típico</h3>

							<pre>
											Internet
												|
											[Router]
												|
											[Firewall Linux]
												|
											[Servidor Web]
							</pre>

							<p>
							En esta topología básica, el firewall host-based controla el tráfico antes 
							de que llegue al servicio web, reduciendo riesgos de explotación remota.
							</p>

							<hr>

							<h3>Conclusión</h3>

							<p>
							En entornos reales, especialmente en pequeñas y medianas empresas en México, 
							es común encontrar servidores Linux expuestos sin reglas adecuadas de filtrado. 
							Muchas veces se confía únicamente en el firewall perimetral, dejando desprotegidos 
							los servicios internos.
							</p>

							<p>
							La correcta implementación de iptables, combinada con monitoreo de logs y 
							segmentación de red, fortalece significativamente la postura de seguridad. 
							Sin embargo, su configuración debe realizarse con conocimiento técnico sólido, 
							ya que una regla mal definida puede generar indisponibilidad o dejar brechas abiertas.
							</p>

							<hr>

							<h3>Fuentes de consulta en español</h3>

							<ul>
							<li>Guía de iptables – Documentación oficial de Red Hat (versión en español).</li>
							<li>Manual de administración de Ubuntu Server (sección de firewall).</li>
							<li>Portal de ciberseguridad del INCIBE (Instituto Nacional de Ciberseguridad de España).</li>
							<li>Comunidad Linux y manuales técnicos disponibles en documentación GNU.</li>
							</ul>
							
							<ul class="actions">
								<li>
									<a href="docs/180370-act03.pdf" class="button" download>
										Descargar actividad
									</a>
								</li>
							</ul>

						</article>
					</div>
				</div>

			<!-- Footer -->
				<div id="footer-wrapper">
					<div id="copyright" class="container">
						<ul class="menu">
							<li>&copy; Juan Alejandro Pérez Ventura. Todos los derechos reservados.</li><li>Diseño: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</div>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
